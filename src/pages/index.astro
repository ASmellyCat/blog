---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import Navigation from '../components/Navigation.astro';
import PostList from '../components/PostList.astro';

const posts = await getCollection('posts', ({ data }) => data.lang === 'zh');
const enPosts = await getCollection('posts', ({ data }) => data.lang === 'en');
const enTitles = Object.fromEntries(enPosts.map(p => [p.id.replace(/\/(zh|en)$/, ''), p.data.title]));
---

<BaseLayout title="coconut的梦游仙境">
  <Navigation />
  <div class="lg:pl-[260px]">
    <main class="max-w-3xl mx-auto px-8 py-16 lg:py-24">
      <header class="mb-20 text-center lg:text-left">
        <!-- Glitch title: English part with Orbitron -->
        <h1
          class="glitch-title text-4xl lg:text-6xl font-black tracking-tight mb-2 text-white"
          data-text="coconut的"
          style="font-family: 'Orbitron', sans-serif;"
        >coconut的</h1>
        <!-- Chinese dreamcore subtitle -->
        <p class="text-3xl lg:text-5xl font-bold dream-subtitle tracking-wide mt-1" style="line-height: 1.3;">
          梦游仙境
        </p>
        <p class="text-[var(--color-text-muted)] font-light tracking-widest text-xs mt-6 uppercase" style="font-family: 'Orbitron', sans-serif;">
          Recent transmissions
        </p>
      </header>
      <PostList posts={posts} enTitles={enTitles} />
    </main>
  </div>
</BaseLayout>
